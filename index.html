<!-- Add this just before </body> -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const startTimeRef = ref(db, "startTime");

  const targetDate = new Date("2025-08-08T13:05:00+05:30").getTime();

  const timerEl = document.getElementById("timer");
  const btn = document.getElementById("startBtn");

  function formatTime(ms) {
    const totalSeconds = Math.floor(ms / 1000);
    const hrs = String(Math.floor(totalSeconds / 3600)).padStart(2, "0");
    const mins = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, "0");
    const secs = String(totalSeconds % 60).padStart(2, "0");
    return `${hrs}:${mins}:${secs}`;
  }

  function updateCountdown(startTime) {
    const interval = setInterval(() => {
      const now = Date.now();
      const remaining = targetDate - now;

      if (remaining <= 0) {
        timerEl.textContent = "Timer Ended";
        clearInterval(interval);
      } else {
        timerEl.textContent = formatTime(remaining);
      }
    }, 1000);
  }

  // Listen for any changes to startTime
  onValue(startTimeRef, (snapshot) => {
    const value = snapshot.val();
    if (value) {
      btn.style.display = "none";
      updateCountdown(value);
    }
  });

  // Start button click
  btn.addEventListener("click", async () => {
    const snapshot = await get(startTimeRef);
    if (!snapshot.exists()) {
      await set(startTimeRef, Date.now());
    }
  });
</script>
